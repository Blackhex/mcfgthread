include_mcfgthreaddir = ${includedir}/mcfgthread
include_mcfgthread_HEADERS =  \
  %reldir%/fwd.h  \
  %reldir%/win32.h  \
  %reldir%/memory.h  \
  %reldir%/clock.h  \
  %reldir%/mutex.h  \
  %reldir%/cond.h  \
  %reldir%/once.h  \
  %reldir%/thread.h  \
  %reldir%/cxa.h  \
  %reldir%/dtor_queue.h  \
  ${NOTHING}

lib_LTLIBRARIES += lib/libmcfgthread.la
lib_libmcfgthread_la_SOURCES =  \
  %reldir%/startup.c  \
  %reldir%/win32.c  \
  %reldir%/memory.c  \
  %reldir%/clock.c  \
  %reldir%/mutex.c  \
  %reldir%/cond.c  \
  %reldir%/once.c  \
  %reldir%/thread.c  \
  %reldir%/cxa.c  \
  %reldir%/dtor_queue.c  \
  ${NOTHING}

lib_libmcfgthread_la_CFLAGS =  \
  ${AM_CFLAGS} -ffreestanding -nostdlib

lib_libmcfgthread_la_LIBADD =  \
  -lkernel32 -lntdll

lib_libmcfgthread_la_LDFLAGS =  \
  -Wc,-nostdlib -no-undefined -version-info 1:0  \
  -Wl,-e__MCF_startup,--subsystem,windows:6.0  \
  -Wl,--exclude-symbols,__MCF_startup,--export-all-symbols,--exclude-libs,ALL  \
  -Wl,--disable-runtime-pseudo-reloc,--disable-auto-import  \
  -Wl,--disable-stdcall-fixup,--enable-auto-image-base
